<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Psychological Assessment Filter</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        body {
            margin: 20px;
            background-color: #f8f9fa;
            color: #333;
        }
        .container {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
        }
        .filters {
            flex: 1;
            min-width: 300px;
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        .results {
            flex: 2;
            min-width: 400px;
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        h2 {
            margin-top: 0;
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 8px;
        }
        .category {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        .category-title {
            font-weight: 600;
            color: #2980b9;
            margin-bottom: 10px;
            font-size: 16px;
        }
        .options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        .option-label {
            display: flex;
            align-items: center;
            background: #f1f8ff;
            padding: 8px 12px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 14px;
        }
        .option-label:hover {
            background: #e3f2fd;
        }
        .option-label input {
            margin-right: 8px;
            cursor: pointer;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background-color: #2c3e50;
            color: white;
        }
        tr:hover {
            background-color: #f5f5f5;
        }
        .no-data {
            text-align: center;
            color: #7f8c8d;
            font-style: italic;
            padding: 20px;
        }
        .counter {
            font-size: 14px;
            color: #7f8c8d;
            margin-bottom: 15px;
        }
        .reset-btn {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            margin-top: 15px;
            transition: background 0.3s;
        }
        .reset-btn:hover {
            background: #c0392b;
        }
    </style>
</head>
<body>

    <h1>ðŸ§  Psychological Assessment Dataset Filter</h1>
    <p class="counter">Menampilkan <span id="record-count">0</span> dari 9,504 records</p>

    <div class="container">
        <!-- Panel Filter -->
        <div class="filters">
            <h2>âœ… Filter Berdasarkan Kategori</h2>
            <div id="filter-container">
                <!-- Filter akan di-generate oleh JavaScript -->
            </div>
            <button class="reset-btn" onclick="resetFilters()">Reset Semua Filter</button>
        </div>

        <!-- Panel Hasil -->
        <div class="results">
            <h2>ðŸ“‹ Data yang Difilter</h2>
            <div id="table-container">
                <table id="data-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Mood</th>
                            <th>Sleep Quality</th>
                            <th>Anxiety Triggers</th>
                            <th>Coping Strategies</th>
                        </tr>
                    </thead>
                    <tbody id="table-body">
                        <!-- Data akan diisi oleh JavaScript -->
                    </tbody>
                </table>
            </div>
            <p id="no-data-message" class="no-data" style="display:none;">Tidak ada data yang sesuai dengan filter.</p>
        </div>
    </div>

    <script>
        // Data contoh (simulasi dataset)
        const sampleData = [
            { id: 1, mood: "Happy", sleepQuality: "Good", anxietyTriggers: "Work/School", coping: "Exercise" },
            { id: 2, mood: "Anxious", sleepQuality: "Poor", anxietyTriggers: "Social Situations", coping: "Meditation" },
            { id: 3, mood: "Sad", sleepQuality: "Fair", anxietyTriggers: "Health", coping: "Talking to Someone" },
            { id: 4, mood: "Neutral", sleepQuality: "Good", anxietyTriggers: "Future Uncertainty", coping: "Professional Help" },
            { id: 5, mood: "Angry", sleepQuality: "Poor", anxietyTriggers: "Trauma Reminders", coping: "Avoidance" },
            { id: 6, mood: "Happy", sleepQuality: "Good", anxietyTriggers: "Work/School", coping: "Exercise" },
            { id: 7, mood: "Anxious", sleepQuality: "Fair", anxietyTriggers: "Social Situations", coping: "Meditation" },
            { id: 8, mood: "Sad", sleepQuality: "Poor", anxietyTriggers: "Health", coping: "Talking to Someone" },
        ];

        // Struktur filter sesuai permintaan
        const filterStructure = [
            {
                title: "Mood",
                key: "mood",
                options: ["Happy", "Neutral", "Sad", "Anxious", "Angry"]
            },
            {
                title: "Anxious Social Scale",
                key: "anxiousScale",
                options: ["Low (1-3)", "Moderate (4-6)", "High (7-10)"]
            },
            {
                title: "Anxiety Triggers",
                key: "anxietyTriggers",
                options: ["Social Situations", "Work/School", "Health", "Future Uncertainty", "Trauma Reminders"]
            },
            {
                title: "Sleep Quality",
                key: "sleepQuality",
                options: ["Good (7+ hours, rested)", "Fair (5-6 hours)", "Poor (<5 hours, restless)"]
            },
            {
                title: "Appetite Change",
                key: "appetiteChange",
                options: ["Increased", "Normal", "Decreased"]
            },
            {
                title: "Lack of Interest (Anhedonia)",
                key: "lackOfInterest",
                options: ["Yes", "No"]
            },
            {
                title: "Enjoyable Activities",
                key: "enjoyableActivities",
                options: ["Often", "Sometimes", "Rarely"]
            },
            {
                title: "Physical Anxiety Symptoms",
                key: "physicalAnxiety",
                options: ["Sweating", "Trembling", "Heart Racing", "Shortness of Breath", "None"]
            },
            {
                title: "Concentration Difficulty",
                key: "concentrationDifficulty",
                options: ["Mild", "Moderate", "Severe"]
            },
            {
                title: "Coping Strategies",
                key: "copingStrategies",
                options: ["Exercise", "Meditation", "Talking to Someone", "Professional Help", "Avoidance"]
            }
        ];

        // State filter
        let activeFilters = {};

        // Render filter UI
        function renderFilters() {
            const container = document.getElementById('filter-container');
            container.innerHTML = '';
            filterStructure.forEach(cat => {
                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'category';
                categoryDiv.innerHTML = `<div class="category-title">${cat.title}</div>`;
                const optionsDiv = document.createElement('div');
                optionsDiv.className = 'options';
                cat.options.forEach(opt => {
                    const isChecked = activeFilters[cat.key] && activeFilters[cat.key].includes(opt);
                    const label = document.createElement('label');
                    label.className = 'option-label';
                    label.innerHTML = `
                        <input type="checkbox" value="${opt}" 
                               onchange="toggleFilter('${cat.key}', '${opt}')" ${isChecked ? 'checked' : ''}>
                        ${opt}
                    `;
                    optionsDiv.appendChild(label);
                });
                categoryDiv.appendChild(optionsDiv);
                container.appendChild(categoryDiv);
            });
        }

        // Toggle filter
        function toggleFilter(category, value) {
            if (!activeFilters[category]) {
                activeFilters[category] = [];
            }
            if (activeFilters[category].includes(value)) {
                activeFilters[category] = activeFilters[category].filter(v => v !== value);
            } else {
                activeFilters[category].push(value);
            }
            applyFilters();
        }

        // Apply filters to data
        function applyFilters() {
            let filteredData = sampleData.filter(item => {
                for (let cat in activeFilters) {
                    if (activeFilters[cat].length === 0) continue;
                    let itemValue = item[cat];
                    if (!itemValue) continue;
                    if (!activeFilters[cat].includes(itemValue)) {
                        return false;
                    }
                }
                return true;
            });

            renderTable(filteredData);
            document.getElementById('record-count').textContent = filteredData.length;
            document.getElementById('no-data-message').style.display = filteredData.length === 0 ? 'block' : 'none';
        }

        // Render table
        function renderTable(data) {
            const tbody = document.getElementById('table-body');
            tbody.innerHTML = '';
            data.forEach(row => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${row.id}</td>
                    <td>${row.mood}</td>
                    <td>${row.sleepQuality}</td>
                    <td>${row.anxietyTriggers}</td>
                    <td>${row.coping}</td>
                `;
                tbody.appendChild(tr);
            });
        }

        // Reset semua filter
        function resetFilters() {
            activeFilters = {};
            renderFilters();
            applyFilters();
        }

        // Inisialisasi
        renderFilters();
        applyFilters();
    </script>
</body>
</html>