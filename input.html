<!DOCTYPE html>
<html lang="id">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Katalog Tes Psikologis - Depresychology</title>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            :root {
                --primary: #667eea;
                --primary-dark: #5a67d8;
                --secondary: #764ba2;
                --light: #f8fafc;
                --dark: #2d3748;
                --gray: #718096;
                --border: #e2e8f0;
                --success: #48bb78;
                --warning: #ed8936;
                --danger: #f56565;
                --info: #4299e1;
                --sidebar-width: 280px;
            }

            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                color: var(--dark);
                background: #f5f7fa;
                min-height: 100vh;
                display: flex;
                overflow-x: hidden;
            }

            /* SIDEBAR */
            .sidebar {
                width: var(--sidebar-width);
                background: linear-gradient(180deg, var(--primary) 0%, var(--secondary) 100%);
                color: white;
                padding: 20px 0;
                height: 100vh;
                position: fixed;
                box-shadow: 4px 0 20px rgba(0, 0, 0, 0.1);
                display: flex;
                flex-direction: column;
                overflow: hidden;
                z-index: 1000;
            }

            .sidebar-content {
                padding: 0 15px;
                flex: 1;
                display: flex;
                flex-direction: column;
                height: 100%;
                overflow: hidden;
            }

            .brand-section {
                margin-bottom: 25px;
                text-align: center;
                padding: 0 10px;
                flex-shrink: 0;
            }

            .brand-icon {
                width: 60px;
                height: 60px;
                margin: 0 auto 12px auto;
                display: flex;
                align-items: center;
                justify-content: center;
                border-radius: 12px;
                background: rgba(255, 255, 255, 0.2);
            }

            .brand-logo-img {
                width: 50px;
                height: 50px;
                object-fit: contain;
            }

            .brand-name {
                font-size: 22px;
                font-weight: 700;
                margin-bottom: 3px;
            }

            .brand-tagline {
                font-size: 12px;
                opacity: 0.9;
                letter-spacing: 0.5px;
                white-space: nowrap;
            }

            .user-section {
                margin-bottom: 25px;
                flex-shrink: 0;
            }

            .user-card {
                background: rgba(255, 255, 255, 0.1);
                border-radius: 10px;
                padding: 15px;
                backdrop-filter: blur(10px);
            }

            .user-name {
                display: flex;
                justify-content: center;
                gap: 6px;
                margin-bottom: 10px;
                font-size: 16px;
                font-weight: 600;
                white-space: nowrap;
            }

            .user-status {
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 8px;
                margin-bottom: 15px;
                font-size: 13px;
            }

            .user-details {
                background: rgba(255, 255, 255, 0.08);
                border-radius: 8px;
                padding: 12px;
            }

            .detail-item {
                display: flex;
                align-items: center;
                gap: 8px;
                margin-bottom: 8px;
                font-size: 12px;
            }

            .detail-item:last-child {
                margin-bottom: 0;
            }

            .detail-item .detail-icon {
                width: 14px;
                text-align: center;
                flex-shrink: 0;
            }

            .detail-item span {
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                flex: 1;
            }

            .menu-checkbox {
                width: 14px;
                height: 14px;
                border: 2px solid rgba(255, 255, 255, 0.5);
                border-radius: 3px;
                margin-right: 10px;
                display: flex;
                align-items: center;
                justify-content: center;
                flex-shrink: 0;
            }

            .menu-checkbox.checked::after {
                content: '‚úì';
                font-size: 10px;
                color: white;
            }
        
            .menu-checkbox.unchecked {
                background: rgba(255, 255, 255, 0.1);
            }

            .menu-section {
                margin-bottom: 15px;
                flex: 1;
                overflow: hidden;
                display: flex;
                flex-direction: column;
            }

            .menu-title {
                font-size: 11px;
                text-transform: uppercase;
                letter-spacing: 0.8px;
                margin: 0 0 12px 8px;
                opacity: 0.7;
                font-weight: 600;
                white-space: nowrap;
                flex-shrink: 0;
            }

            .menu-items-container {
                flex: 1;
                overflow-y: auto;
                overflow-x: hidden;
                scrollbar-width: none;
                -ms-overflow-style: none;
                padding-right: 3px;
            }

            .menu-items-container::-webkit-scrollbar {
                display: none;
            }

            .menu-item {
                display: flex;
                align-items: center;
                padding: 10px 12px;
                border-radius: 8px;
                margin-bottom: 6px;
                transition: all 0.2s ease;
                cursor: pointer;
                text-decoration: none;
                color: white;
                font-size: 13px;
                min-width: 0;
                flex-shrink: 0;
            }

            .menu-item:hover {
                background: rgba(255, 255, 255, 0.15);
                transform: translateX(3px);
            }

            .menu-item.active {
                background: rgba(255, 255, 255, 0.2);
                font-weight: 600;
            }

            .menu-item.active .menu-checkbox {
                border-color: white;
            }

            .menu-item.active .menu-checkbox.unchecked::after {
                content: '‚úì';
                font-size: 10px;
                color: white;
            }

            .menu-icon {
                font-size: 14px;
                margin-right: 10px;
                width: 18px;
                text-align: center;
                flex-shrink: 0;
            }

            .menu-text {
                font-size: 13px;
                flex: 1;
                overflow: hidden;
                text-overflow: ellipsis;
                display: -webkit-box;
                -webkit-line-clamp: 2;
                -webkit-box-orient: vertical;
                line-height: 1.4;
                white-space: normal;
                word-wrap: break-word;
                max-height: 36px;
                line-clamp: 2;
                box-orient: vertical;
            }

            .logout-section {
                margin-top: auto;
                padding: 10px 0;
                border-top: 1px solid rgba(255, 255, 255, 0.1);
                flex-shrink: 0;
            }

            .logout-menu-item {
                display: flex;
                align-items: center;
                padding: 10px 12px;
                border-radius: 8px;
                transition: all 0.2s ease;
                cursor: pointer;
                text-decoration: none;
                color: #fed7d7;
                background: rgba(245, 101, 101, 0.15);
                border: 1px solid rgba(245, 101, 101, 0.3);
                font-size: 13px;
            }

            .logout-menu-item:hover {
                background: rgba(245, 101, 101, 0.25);
                transform: translateX(3px);
                color: #fff5f5;
                border-color: rgba(245, 101, 101, 0.5);
            }

            .logout-menu-icon {
                font-size: 14px;
                margin-right: 10px;
                width: 18px;
                text-align: center;
                flex-shrink: 0;
            }

            .logout-menu-text {
                font-size: 13px;
                flex: 1;
                font-weight: 600;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }

            .logout-menu-checkbox {
                width: 14px;
                border: 2px solid rgba(245, 101, 101, 0.5);
                border-radius: 3px;
                margin-right: 10px;
                display: flex;
                align-items: center;
                justify-content: center;
                background: rgba(245, 101, 101, 0.1);
                flex-shrink: 0;
            }
        
            .logout-menu-checkbox.unchecked::after {
                content: 'üö™';
                font-size: 9px;
                color: #fed7d7;
            }

            /* Main Content - BARU: Katalog Tes */
            .main-content {
                flex: 1;
                margin-left: var(--sidebar-width);
                padding: 25px;
                min-height: 100vh;
                overflow-y: auto;
                padding-bottom: 40px;
                width: calc(100% - var(--sidebar-width));
            }

            .header {
                margin-bottom: 30px;
            }

            .page-title {
                font-size: 28px;
                font-weight: 700;
                color: var(--dark);
                display: flex;
                align-items: center;
                gap: 12px;
            }

            .page-icon {
                font-size: 24px;
                background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
                -webkit-background-clip: text;
                background-clip: text;
                -webkit-text-fill-color: transparent;
            }

            /* Catalog Header */
            .catalog-header {
                background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
                border-radius: 16px;
                padding: 30px;
                color: white;
                margin-bottom: 30px;
                box-shadow: 0 10px 30px rgba(102, 126, 234, 0.2);
            }

            .catalog-title {
                font-size: 24px;
                font-weight: 700;
                margin-bottom: 10px;
            }

            .catalog-description {
                font-size: 16px;
                opacity: 0.9;
                margin-bottom: 20px;
                line-height: 1.6;
            }

            .catalog-stats {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
                gap: 20px;
            }

            .catalog-stat {
                background: rgba(255, 255, 255, 0.15);
                backdrop-filter: blur(8px);
                border-radius: 12px;
                padding: 20px;
                text-align: center;
                border: 1px solid rgba(255, 255, 255, 0.2);
            }

            .catalog-stat-number {
                font-size: 32px;
                font-weight: 700;
                margin-bottom: 8px;
            }

            .catalog-stat-label {
                font-size: 14px;
                opacity: 0.9;
            }

            /* Search and Filter */
            .search-filter-container {
                background: white;
                border-radius: 16px;
                padding: 25px;
                margin-bottom: 30px;
                box-shadow: 0 6px 20px rgba(0, 0, 0, 0.05);
                border: 1px solid var(--border);
            }
        
            .search-box {
                display: flex;
                gap: 15px;
                margin-bottom: 20px;
            }
        
            .search-input {
                flex: 1;
                padding: 14px 20px;
                border: 2px solid var(--border);
                border-radius: 12px;
                font-size: 16px;
                transition: all 0.3s ease;
            }

            .search-input:focus {
                outline: none;
                border-color: var(--primary);
                box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            }

            .search-button {
                padding: 14px 28px;
                background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
                color: white;
                border: none;
                border-radius: 12px;
                font-size: 16px;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s ease;
                display: flex;
                align-items: center;
                gap: 10px;
            }

            .search-button:hover {
                transform: translateY(-2px);
                box-shadow: 0 6px 20px rgba(102, 126, 234, 0.3);
            }

            .filter-options {
                display: flex;
                flex-wrap: wrap;
                gap: 12px;
            }

            .filter-tag {
                padding: 8px 16px;
                background: var(--light);
                border: 2px solid var(--border);
                border-radius: 20px;
                font-size: 14px;
                cursor: pointer;
                transition: all 0.3s ease;
            }

            .filter-tag:hover {
                background: rgba(102, 126, 234, 0.1);
                border-color: var(--primary);
            }

            .filter-tag.active {
                background: var(--primary);
                color: white;
                border-color: var(--primary);
            }

            /* Tests Grid */
            .tests-grid {
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
                gap: 25px;
                margin-bottom: 40px;
            }
        
            .test-card {
                background: white;
                border-radius: 16px;
                overflow: hidden;
                box-shadow: 0 6px 20px rgba(0, 0, 0, 0.05);
                border: 1px solid var(--border);
                transition: all 0.3s ease;
                display: flex;
                flex-direction: column;
            }

            .test-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
                border-color: var(--primary);
            }

            .test-card-header {
                padding: 25px 25px 15px;
                background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
                border-bottom: 1px solid var(--border);
            }

            .test-card-title {
                display: flex;
                align-items: center;
                gap: 12px;
                margin-bottom: 10px;
            }

            .test-icon {
                width: 48px;
                height: 48px;
                background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
                border-radius: 12px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 20px;
                color: white;
                flex-shrink: 0;
            }

            .test-name {
                font-size: 20px;
                font-weight: 700;
                color: var(--dark);
            }

            .test-acronym {
                font-size: 14px;
                color: var(--primary);
                font-weight: 600;
            }

            .test-description {
                color: var(--gray);
                font-size: 14px;
                line-height: 1.5;
            }

            .test-card-body {
                padding: 20px 25px;
                flex: 1;
                display: flex;
                flex-direction: column;
            }

            .test-details {
                margin-bottom: 20px;
            }

            .test-detail {
                display: flex;
                align-items: center;
                gap: 10px;
                margin-bottom: 10px;
                font-size: 14px;
                color: var(--gray);
            }

            .test-detail i {
                color: var(--primary);
                width: 16px;
            }

            .test-tags {
                display: flex;
                flex-wrap: wrap;
                gap: 8px;
                margin-top: 15px;
            }

            .test-tag {
                padding: 4px 12px;
                background: var(--light);
                border-radius: 20px;
                font-size: 12px;
                color: var(--gray);
                border: 1px solid var(--border);
            }

            .test-card-footer {
                padding: 0 25px 25px;
                margin-top: auto;
            }

            .test-actions {
                display: flex;
                gap: 12px;
            }

            .test-button {
                flex: 1;
                padding: 12px 20px;
                border: none;
                border-radius: 10px;
                font-size: 14px;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s ease;
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 8px;
            }

            .test-button.start {
                background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
                color: white;
            }

            .test-button.start:hover {
                transform: translateY(-2px);
                box-shadow: 0 6px 20px rgba(102, 126, 234, 0.3);
            }

            .test-button.details {
                background: white;
                color: var(--gray);
                border: 2px solid var(--border);
            }

            .test-button.details:hover {
                background: var(--light);
                border-color: var(--primary);
                color: var(--primary);
            }

            /* Featured Test Banner */
            .featured-banner {
                background: linear-gradient(135deg, var(--warning) 0%, #e53e3e 100%);
                border-radius: 16px;
                padding: 30px;
                color: white;
                margin-bottom: 30px;
                display: flex;
                align-items: center;
                gap: 30px;
                box-shadow: 0 10px 30px rgba(237, 137, 54, 0.2);
            }

            .featured-icon {
                width: 80px;
                height: 80px;
                background: rgba(255, 255, 255, 0.2);
                border-radius: 20px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 32px;
                flex-shrink: 0;
            }

            .featured-content {
                flex: 1;
            }

            .featured-title {
                font-size: 24px;
                font-weight: 700;
                margin-bottom: 10px;
            }

            .featured-description {
                font-size: 16px;
                opacity: 0.9;
                margin-bottom: 20px;
            }

            .featured-button {
                padding: 14px 28px;
                background: white;
                color: var(--warning);
                border: none;
                border-radius: 12px;
                font-size: 16px;
                font-weight: 700;
                cursor: pointer;
                transition: all 0.3s ease;
                display: inline-flex;
                align-items: center;
                gap: 10px;
            }

            .featured-button:hover {
                transform: translateY(-2px);
                box-shadow: 0 6px 20px rgba(255, 255, 255, 0.2);
            }

            /* Quick Stats */
            .quick-stats {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 20px;
                margin-bottom: 30px;
            }

            .quick-stat-card {
                background: white;
                border-radius: 12px;
                padding: 20px;
                display: flex;
                align-items: center;
                gap: 15px;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
                border: 1px solid var(--border);
                transition: all 0.3s ease;
            }

            .quick-stat-card:hover {
                transform: translateY(-3px);
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            }

            .quick-stat-icon {
                width: 50px;
                height: 50px;
                background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
                border-radius: 10px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 20px;
                color: white;
                flex-shrink: 0;
            }

            .quick-stat-content {
                flex: 1;
            }

            .quick-stat-number {
                font-size: 24px;
                font-weight: 700;
                color: var(--dark);
                margin-bottom: 5px;
            }

            .quick-stat-label {
                font-size: 14px;
                color: var(--gray);
            }

            /* Footer */
            .footer {
                text-align: center;
                padding: 30px 20px 20px;
                color: var(--gray);
                margin-top: 40px;
                border-top: 1px solid var(--border);
            }

            .footer-logo {
                font-size: 20px;
                font-weight: 700;
                color: var(--primary);
                margin-bottom: 8px;
            }

            .copyright {
                font-size: 14px;
                opacity: 0.8;
            }

            /* Modal untuk Detail Tes */
            .modal-overlay {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.7);
                display: none;
                justify-content: center;
                align-items: center;
                z-index: 2000;
                padding: 20px;
            }

            .modal-overlay.active {
                display: flex;
            }

            .modal-content {
                background: white;
                border-radius: 20px;
                max-width: 800px;
                width: 100%;
                max-height: 90vh;
                overflow-y: auto;
                animation: modalSlideIn 0.3s ease;
            }

            @keyframes modalSlideIn {
                from {
                    opacity: 0;
                    transform: translateY(-20px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            .modal-header {
                background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
                color: white;
                padding: 30px;
                border-radius: 20px 20px 0 0;
            }

            .modal-title {
                font-size: 24px;
                font-weight: 700;
                margin-bottom: 10px;
                display: flex;
                align-items: center;
                gap: 12px;
            }

            .modal-subtitle {
                font-size: 16px;
                opacity: 0.9;
            }

            .modal-body {
                padding: 30px;
            }

            .modal-section {
                margin-bottom: 25px;
            }

            .modal-section-title {
                font-size: 18px;
                font-weight: 600;
                color: var(--dark);
                margin-bottom: 15px;
                display: flex;
                align-items: center;
                gap: 10px;
            }

            .modal-section-title i {
                color: var(--primary);
            }

            .test-info-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 15px;
                margin-bottom: 20px;
            }

            .info-item {
                background: var(--light);
                padding: 15px;
                border-radius: 10px;
                border-left: 4px solid var(--primary);
            }

            .info-label {
                font-size: 12px;
                color: var(--gray);
                margin-bottom: 5px;
            }

            .info-value {
                font-size: 16px;
                font-weight: 600;
                color: var(--dark);
            }

            .instructions-list {
                list-style: none;
                padding-left: 0;
            }

            .instructions-list li {
                padding: 8px 0;
                color: var(--dark);
                display: flex;
                align-items: flex-start;
                gap: 10px;
            }

            .instructions-list i {
                color: var(--primary);
                margin-top: 4px;
                flex-shrink: 0;
            }

            .modal-footer {
                padding: 20px 30px;
                background: var(--light);
                border-radius: 0 0 20px 20px;
                display: flex;
                justify-content: flex-end;
                gap: 15px;
            }

            .modal-button {
                padding: 12px 24px;
                border: none;
                border-radius: 8px;
                font-size: 15px;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s ease;
            }

            .modal-button.primary {
                background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
                color: white;
            }

            .modal-button.primary:hover {
                transform: translateY(-2px);
                box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
            }

            .modal-button.secondary {
                background: white;
                color: var(--gray);
                border: 2px solid var(--border);
            }

            .modal-button.secondary:hover {
                background: var(--light);
                border-color: var(--primary);
                color: var(--primary);
            }

            /* Responsive */
            @media (max-width: 1024px) {
                :root {
                    --sidebar-width: 240px;
                }
            
                .main-content {
                    padding: 20px;
                    width: calc(100% - 240px);
                }
            
                .menu-text {
                    font-size: 12px;
                }
            
                .tests-grid {
                    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
                }
            }
        
            @media (max-width: 768px) {
                body {
                    flex-direction: column;
                }
            
                .sidebar {
                    width: 100%;
                    height: auto;
                    position: relative;
                    padding: 15px 0;
                    max-height: 70vh;
                    overflow-y: auto;
                }
            
                .sidebar-content {
                    padding: 0 15px;
                    overflow: visible;
                }
            
                .menu-items-container {
                    overflow: visible;
                }
            
                .main-content {
                    margin-left: 0;
                    padding: 15px;
                    width: 100%;
                }
            
                .catalog-stats {
                    grid-template-columns: repeat(2, 1fr);
                }
                
                .tests-grid {
                    grid-template-columns: 1fr;
                }
            
                .search-box {
                    flex-direction: column;
                }
            
                .featured-banner {
                    flex-direction: column;
                    text-align: center;
                    gap: 20px;
                }
            
                .featured-icon {
                    width: 60px;
                    height: 60px;
                    font-size: 24px;
                }
            
                .modal-content {
                    margin: 10px;
                }
            
                .test-actions {
                    flex-direction: column;
                }
            }
        
            @media (max-width: 480px) {
                .catalog-stats {
                    grid-template-columns: 1fr;
                }
            
                .quick-stats {
                    grid-template-columns: 1fr;
                }
            
                .filter-options {
                    justify-content: center;
                }
            
                .test-card-title {
                    flex-direction: column;
                    align-items: flex-start;
                    gap: 10px;
                }
            
                .modal-header {
                    padding: 20px;
                }
            
                .modal-body {
                    padding: 20px;
                }
            
                .test-info-grid {
                    grid-template-columns: 1fr;
                }
            
                .menu-text {
                    font-size: 13px;
                    flex: 1;
                    overflow: hidden;
                    text-overflow: ellipsis;
                    display: -webkit-box;
                    display: -moz-box;
                    display: box;
                    -webkit-line-clamp: 2;
                    -moz-line-clamp: 2;
                    line-clamp: 2;
                    -webkit-box-orient: vertical;
                    -moz-box-orient: vertical;
                    box-orient: vertical;
                    line-height: 1.4;
                    white-space: normal;
                    word-wrap: break-word;
                    max-height: 36px;
                }
            
                .brand-name {
                    font-size: 20px;
                }
            
                .page-title {
                    font-size: 22px;
                }
            }
        </style>
    </head>
    <body>
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-content">
                <!-- Brand Section -->
                <div class="brand-section">
                    <div class="brand-icon">
                        <img src="Logo Depression Web.png" alt="Depresychology Logo" class="brand-logo-img">
                    </div>
                    <div class="brand-name">Depresychology</div>
                    <div class="brand-tagline">Assessment Psikologis Online</div>
                </div>

                <!-- User Section -->
                <div class="user-section">
                    <div class="user-card">
                        <div class="user-name" id="sidebar-user-name">
                            <span id="user-full-name">Loading...</span>
                        </div>

                        <div class="user-status">
                            <span>Online</span>
                        </div>

                        <div class="user-details">
                            <div class="detail-item">
                                <div class="detail-icon">üìß</div>
                                <span id="user-email">Loading...</span>
                            </div>
                            <div class="detail-item">
                                <div class="detail-icon">üë§</div>
                                <span id="user-gender">Loading...</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Menu Section -->
                <div class="menu-section">
                    <div class="menu-title">MENU UTAMA</div>

                    <div class="menu-items-container">
                        <a href="dashboard.html" class="menu-item" onclick="setActiveMenu('dashboard')">
                            <div class="menu-checkbox unchecked"></div>
                            <div class="menu-icon">üè†</div>
                            <div class="menu-text">Dashboard</div>
                        </a>

                        <a href="dataset.html" class="menu-item" onclick="setActiveMenu('dataset')">
                            <div class="menu-checkbox unchecked"></div>
                            <div class="menu-icon">üóÉÔ∏è</div>
                            <div class="menu-text">Psychological Assessment Dataset</div>
                        </a>

                        <a href="analisa.html" class="menu-item" onclick="setActiveMenu('analisa')">
                            <div class="menu-checkbox unchecked"></div>
                            <div class="menu-icon">üî¨</div>
                            <div class="menu-text">Analisa Psychological Assessment Dataset</div>
                        </a>

                        <a href="input.html" class="menu-item" onclick="setActiveMenu('tes')">
                            <div class="menu-checkbox unchecked"></div>
                            <div class="menu-icon">üß™</div>
                            <div class="menu-text">Tes Psikologis</div>
                        </a>

                        <a href="hasil.html" class="menu-item" onclick="trackActivity('Hasil Tes', 'üìä', 'hasil')">
                            <div class="menu-checkbox unchecked"></div>
                            <div class="menu-icon">üìä</div>
                            <div class="menu-text">Hasil Tes Saya</div>
                        </a>

                        <a href="riwayat.html" class="menu-item" onclick="trackActivity('Riwayat', 'üìú', 'riwayat')">
                            <div class="menu-checkbox unchecked"></div>
                            <div class="menu-icon">üìú</div>
                            <div class="menu-text">Riwayat Saya</div>
                        </a>

                        <a href="tentang.html" class="menu-item" onclick="trackActivity('Tentang Website', 'üí≠', 'tentang')">
                            <div class="menu-checkbox unchecked"></div>
                            <div class="menu-icon">üí≠</div>
                            <div class="menu-text">Tentang website</div>
                        </a>
                    </div>
                </div>

                <!-- Logout Section -->
                <div class="logout-section">
                    <a href="index.html" class="logout-menu-item" onclick="return confirmLogout()">
                        <div class="logout-menu-checkbox unchecked"></div>
                        <div class="logout-menu-icon">üö™</div>
                        <div class="logout-menu-text">Keluar</div>
                    </a>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Header -->
            <div class="header">
                <h1 class="page-title">
                    <span class="page-icon">üß™</span>
                    Katalog Tes Psikologis
                </h1>
            </div>

            <!-- Catalog Header -->
            <div class="catalog-header">
                <h2 class="catalog-title">Pilih Tes yang Tepat untuk Anda</h2>
                <p class="catalog-description">
                    Temukan berbagai instrumen psikologis yang divalidasi untuk menilai kesehatan mental Anda.
                    Setiap tes dirancang untuk mengukur aspek spesifik dengan akurasi tinggi.
                </p>
                
                <div class="catalog-stats">
                    <div class="catalog-stat">
                        <div class="catalog-stat-number">13</div>
                        <div class="catalog-stat-label">Jenis Tes Tersedia</div>
                    </div>
                    <div class="catalog-stat">
                        <div class="catalog-stat-number">99.99%</div>
                        <div class="catalog-stat-label">Validitas Terjamin</div>
                    </div>
                    <div class="catalog-stat">
                        <div class="catalog-stat-number">Privasi</div>
                        <div class="catalog-stat-label">Data Terlindungi</div>
                    </div>
                    <div class="catalog-stat">
                        <div class="catalog-stat-number">Gratis</div>
                        <div class="catalog-stat-label">Akses Tanpa Biaya</div>
                    </div>
                </div>
            </div>

            <!-- Search and Filter -->
            <div class="search-filter-container">
                <div class="search-box">
                    <input type="text" class="search-input" id="search-input" placeholder="Cari tes berdasarkan nama atau kategori...">
                    <button class="search-button" onclick="searchTests()">
                        <i class="fas fa-search"></i> Cari
                    </button>
                </div>
            
                <div class="filter-options">
                    <span class="filter-tag active" data-filter="all">Semua Tes</span>
                    <span class="filter-tag" data-filter="depresi">Depresi</span>
                    <span class="filter-tag" data-filter="kecemasan">Kecemasan</span>
                    <span class="filter-tag" data-filter="stres">Stres</span>
                    <span class="filter-tag" data-filter="tidur">Tidur</span>
                    <span class="filter-tag" data-filter="koping">Koping</span>
                    <span class="filter-tag" data-filter="wellbeing">Kesejahteraan</span>
                    <span class="filter-tag" data-filter="pendek">Pendek</span>
                </div>
            </div>

            <!-- Quick Stats -->
            <div class="quick-stats">
                <div class="quick-stat-card">
                    <div class="quick-stat-icon">üìä</div>
                    <div class="quick-stat-content">
                        <div class="quick-stat-number" id="total-tests">13</div>
                        <div class="quick-stat-label">Total Tes Tersedia</div>
                    </div>
                </div>
                <div class="quick-stat-card">
                    <div class="quick-stat-icon">‚è±Ô∏è</div>
                    <div class="quick-stat-content">
                        <div class="quick-stat-number" id="avg-time">15m</div>
                        <div class="quick-stat-label">Rata-rata Waktu</div>
                    </div>
                </div>
                <div class="quick-stat-card">
                    <div class="quick-stat-icon">üéØ</div>
                    <div class="quick-stat-content">
                        <div class="quick-stat-number" id="completed-tests">0</div>
                        <div class="quick-stat-label">Tes Diselesaikan</div>
                    </div>
                </div>
                <div class="quick-stat-card">
                    <div class="quick-stat-icon">üìà</div>
                    <div class="quick-stat-content">
                        <div class="quick-stat-number" id="accuracy-rate">95%</div>
                        <div class="quick-stat-label">Tingkat Akurasi</div>
                    </div>
                </div>
            </div>

            <!-- Tests Grid -->
            <div class="tests-grid" id="tests-grid">
                <!-- Tes akan dimuat melalui JavaScript -->
            </div>

            <!-- Footer -->
            <div class="footer">
                <div class="footer-logo">Depresychology</div>
                <div class="copyright">¬© 2026 Depresychology - Assessment Psikologis Online. Hak cipta dilindungi undang-undang.</div>
            </div>
        </div>
        
        <!-- Modal untuk Detail Tes -->
        <div class="modal-overlay" id="test-detail-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title">
                        <span id="modal-test-icon">üìä</span>
                        <span id="modal-test-name">Nama Tes</span>
                        <span id="modal-test-acronym" style="font-size: 18px; opacity: 0.9;">(Singkatan)</span>
                    </h2>
                    <p class="modal-subtitle" id="modal-test-description">Deskripsi tes akan muncul di sini</p>
                </div>
            
                <div class="modal-body">
                    <div class="modal-section">
                        <h3 class="modal-section-title"><i class="fas fa-info-circle"></i> Informasi Tes</h3>
                        <div class="test-info-grid">
                            <div class="info-item">
                                <div class="info-label">Jumlah Pertanyaan</div>
                                <div class="info-value" id="modal-question-count">0</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">Waktu Pengerjaan</div>
                                <div class="info-value" id="modal-duration">0 menit</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">Kategori</div>
                                <div class="info-value" id="modal-category">-</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">Tingkat Validitas</div>
                                <div class="info-value" id="modal-validity">Tinggi</div>
                            </div>
                        </div>
                    </div>
                
                    <div class="modal-section">
                        <h3 class="modal-section-title"><i class="fas fa-book-open"></i> Tentang Tes Ini</h3>
                        <p id="modal-about" style="color: var(--dark); line-height: 1.6; margin-bottom: 15px;">
                            Informasi detail tentang tes akan muncul di sini.
                        </p>
                        <div class="test-tags" id="modal-tags"></div>
                    </div>
                
                    <div class="modal-section">
                        <h3 class="modal-section-title"><i class="fas fa-list-check"></i> Petunjuk Pengerjaan</h3>
                        <ul class="instructions-list" id="modal-instructions">
                            <!-- Instruksi akan diisi melalui JavaScript -->
                        </ul>
                    </div>
                    
                    <div class="modal-section">
                        <h3 class="modal-section-title"><i class="fas fa-chart-bar"></i> Interpretasi Hasil</h3>
                        <p id="modal-interpretation" style="color: var(--dark); line-height: 1.6;">
                            Hasil tes akan diinterpretasikan berdasarkan skor yang diperoleh dan disajikan dengan rekomendasi yang sesuai.
                        </p>
                    </div>
                </div>
            
                <div class="modal-footer">
                    <button class="modal-button secondary" id="close-detail-modal">
                        Tutup
                    </button>
                    <button class="modal-button primary" id="start-test-from-modal">
                        <i class="fas fa-play"></i> Mulai Tes
                    </button>
                </div>
            </div>
        </div>

        <script>
            const psychologicalTests = [ // Data Tes Psikologis
                {
                    id: "dataset",
                    name: "Psychological Assessment Dataset",
                    acronym: "Dataset",
                    icon: "üóÉÔ∏è",
                    description: "Dataset lengkap berbagai asesmen psikologis untuk analisis komprehensif",
                    questions: 500,
                    duration: "Bervariasi",
                    category: "Dataset",
                    tags: ["dataset", "analisis", "komprehensif", "penelitian"],
                    validity: "Berdasarkan penelitian",
                    about: "Dataset ini berisi kumpulan data dari berbagai instrumen psikologis yang divalidasi untuk tujuan penelitian dan analisis statistik.",
                    instructions: [
                        "Dataset dapat diakses untuk tujuan penelitian",
                        "Data telah di-anonymize untuk melindungi privasi",
                        "Format data dalam CSV/Excel",
                        "Lengkapi persetujuan etika sebelum mengakses"
                    ],
                    interpretation: "Dataset digunakan untuk analisis statistik dan penelitian, bukan untuk diagnosis individual.",
                    url: "dataset.html",
                    source: "https://www.kaggle.com/datasets/abdullah895/psychological-assessment-dataset"
                },
                {
                    id: "phq9",
                    name: "Patient Health Questionnaire-9",
                    acronym: "PHQ-9",
                    icon: "üòî",
                    description: "Skrining depresi 9 pertanyaan berdasarkan kriteria DSM-5",
                    questions: 9,
                    duration: "5-7 menit",
                    category: "Depresi",
                    tags: ["depresi", "skrining", "DSM-5", "pendek"],
                    validity: "Tinggi",
                    about: "PHQ-9 adalah instrumen skrining depresi yang divalidasi dengan baik, digunakan untuk mengukur tingkat keparahan gejala depresi berdasarkan 9 kriteria DSM-5.",
                    instructions: [
                        "Jawab semua 9 pertanyaan",
                        "Pilih jawaban berdasarkan pengalaman 2 minggu terakhir",
                        "Pilih satu jawaban untuk setiap pertanyaan",
                        "Jawab dengan jujur sesuai kondisi Anda"
                    ],
                    interpretation: "Skor 0-4: Minimal, 5-9: Ringan, 10-14: Sedang, 15-19: Parah, 20-27: Sangat Parah.",
                    url: "test.html?type=phq9",
                    color: "primary"
                },
                {
                    id: "gad7",
                    name: "Generalized Anxiety Disorder-7",
                    acronym: "GAD-7",
                    icon: "üò∞",
                    description: "Skrining gangguan kecemasan umum 7 pertanyaan",
                    questions: 7,
                    duration: "3-5 menit",
                    category: "Kecemasan",
                    tags: ["kecemasan", "skrining", "cepat", "GAD"],
                    validity: "Tinggi",
                    about: "GAD-7 adalah instrumen skrining untuk gangguan kecemasan umum yang telah divalidasi secara luas dalam pengaturan klinis dan penelitian.",
                    instructions: [
                        "7 pertanyaan tentang gejala kecemasan",
                        "Rujuk pada pengalaman 2 minggu terakhir",
                        "Pilih frekuensi setiap gejala",
                        "Hasil untuk skrining awal, bukan diagnosis"
                    ],
                    interpretation: "Skor 0-4: Minimal, 5-9: Ringan, 10-14: Sedang, 15-21: Parah.",
                    url: "test.html?type=gad7",
                    color: "info"
                },
                {
                    id: "dass42",
                    name: "Depression Anxiety Stress Scales-42",
                    acronym: "DASS-42",
                    icon: "üìã",
                    description: "Mengukur depresi, kecemasan, dan stres secara komprehensif",
                    questions: 42,
                    duration: "15-20 menit",
                    category: "Depresi, Kecemasan, Stres",
                    tags: ["depresi", "kecemasan", "stres", "lengkap", "komprehensif"],
                    validity: "Sangat Tinggi",
                    about: "DASS-42 adalah instrumen yang mengukur tiga keadaan emosional negatif: depresi, kecemasan, dan stres. Terdiri dari 3 subskala dengan 14 item masing-masing.",
                    instructions: [
                        "42 pertanyaan dibagi 3 subskala",
                        "Baca setiap pernyataan dengan seksama",
                        "Pilih seberapa banyak pernyataan berlaku untuk Anda minggu lalu",
                        "Jawab semua pertanyaan untuk hasil akurat"
                    ],
                    interpretation: "Hasil dinormalisasi untuk setiap subskala: Normal, Ringan, Sedang, Parah, Sangat Parah.",
                    url: "test.html?type=dass42",
                    color: "secondary"
                },
                {
                    id: "pss",
                    name: "Perceived Stress Scale",
                    acronym: "PSS",
                    icon: "‚öñÔ∏è",
                    description: "Mengukur persepsi individu terhadap stres",
                    questions: 10,
                    duration: "5-10 menit",
                    category: "Stres",
                    tags: ["stres", "persepsi", "psikologis", "pendek"],
                    validity: "Tinggi",
                    about: "PSS mengukur sejauh mana situasi dalam hidup seseorang dianggap sebagai stres. Tes ini menilai persepsi stres daripada peristiwa stres itu sendiri.",
                    instructions: [
                        "10 pertanyaan tentang perasaan dan pikiran bulan terakhir",
                        "Pilih frekuensi perasaan tersebut",
                        "Fokus pada bagaimana situasi mempengaruhi Anda",
                        "Tidak ada jawaban benar atau salah"
                    ],
                    interpretation: "Skor 0-13: Stres rendah, 14-26: Stres sedang, 27-40: Stres tinggi.",
                    url: "test.html?type=pss",
                    color: "warning"
                },
                {
                    id: "who5",
                    name: "WHO Well-Being Index",
                    acronym: "WHO-5",
                    icon: "üòä",
                    description: "Mengukur kesejahteraan psikologis secara positif",
                    questions: 5,
                    duration: "2-3 menit",
                    category: "Kesejahteraan",
                    tags: ["wellbeing", "positif", "cepat", "WHO"],
                    validity: "Tinggi",
                    about: "WHO-5 adalah instrumen singkat yang mengukur kesejahteraan psikologis subjektif. Ini berfokus pada aspek positif kesehatan mental.",
                    instructions: [
                        "5 pertanyaan positif tentang perasaan 2 minggu terakhir",
                        "Pilih seberapa sering Anda merasakan hal positif",
                        "Fokus pada pengalaman positif",
                        "Hasil dapat digunakan untuk pemantauan kesejahteraan"
                    ],
                    interpretation: "Skor 0-50: Kesejahteraan rendah, 51-70: Sedang, 71-100: Kesejahteraan tinggi.",
                    url: "test.html?type=who5",
                    color: "success"
                },
                {
                    id: "bdi",
                    name: "Beck Depression Inventory",
                    acronym: "BDI",
                    icon: "üìù",
                    description: "Inventori depresi Beck yang terperinci",
                    questions: 21,
                    duration: "10-15 menit",
                    category: "Depresi",
                    tags: ["depresi", "beck", "terperinci", "klinis"],
                    validity: "Sangat Tinggi",
                    about: "BDI adalah salah satu instrumen depresi yang paling banyak digunakan dan telah divalidasi. Mengukur intensitas gejala depresi.",
                    instructions: [
                        "21 kelompok pernyataan tentang gejala depresi",
                        "Pilih satu pernyataan dalam setiap kelompok",
                        "Berdasarkan perasaan 2 minggu terakhir",
                        "Pilih yang paling menggambarkan kondisi Anda"
                    ],
                    interpretation: "Skor 0-13: Minimal, 14-19: Ringan, 20-28: Sedang, 29-63: Parah.",
                    url: "test.html?type=bdi",
                    color: "primary"
                },
                {
                    id: "bai",
                    name: "Beck Anxiety Inventory",
                    acronym: "BAI",
                    icon: "üò®",
                    description: "Inventori kecemasan Beck untuk gejala somatik dan kognitif",
                    questions: 21,
                    duration: "10-15 menit",
                    category: "Kecemasan",
                    tags: ["kecemasan", "beck", "gejala", "klinis"],
                    validity: "Sangat Tinggi",
                    about: "BAI mengukur tingkat keparahan kecemasan dengan fokus pada gejala somatik dan kognitif pada orang dewasa dan remaja.",
                    instructions: [
                        "21 gejala kecemasan umum",
                        "Pilih seberapa terganggu Anda oleh setiap gejala minggu lalu",
                        "Termasuk gejala fisik dan psikologis",
                        "Jawab sesuai pengalaman aktual"
                    ],
                    interpretation: "Skor 0-7: Minimal, 8-15: Ringan, 16-25: Sedang, 26-63: Parah.",
                    url: "test.html?type=bai",
                    color: "info"
                },
                {
                    id: "psqi",
                    name: "Pittsburgh Sleep Quality Index",
                    acronym: "PSQI",
                    icon: "üò¥",
                    description: "Mengukur kualitas dan pola tidur",
                    questions: 19,
                    duration: "10-12 menit",
                    category: "Tidur",
                    tags: ["tidur", "kualitas", "pola", "kesehatan"],
                    validity: "Tinggi",
                    about: "PSQI adalah instrumen yang menilai kualitas tidur dan gangguan tidur selama satu bulan terakhir. Mengidentifikasi 'poor sleepers'.",
                    instructions: [
                        "19 pertanyaan tentang kebiasaan tidur bulan lalu",
                        "Termasuk waktu tidur, durasi, gangguan, dan obat",
                        "Jawab berdasarkan pengalaman rata-rata",
                        "Akurat jika menggambarkan pola tidur biasa"
                    ],
                    interpretation: "Skor global 0-21, >5 menunjukkan kualitas tidur yang buruk.",
                    url: "test.html?type=psqi",
                    color: "secondary"
                },
                {
                    id: "shaps",
                    name: "Snaith-Hamilton Pleasure Scale",
                    acronym: "SHAPS",
                    icon: "üé≠",
                    description: "Mengukur kemampuan mengalami kesenangan (anhedonia)",
                    questions: 14,
                    duration: "5-10 menit",
                    category: "Depresi",
                    tags: ["anhedonia", "kesenangan", "emosi", "klinis"],
                    validity: "Tinggi",
                    about: "SHAPS mengukur anhedonia (ketidakmampuan merasakan kesenangan) yang merupakan gejala inti depresi dan gangguan psikiatri lainnya.",
                    instructions: [
                        "14 situasi yang mungkin menyenangkan",
                        "Tunjukkan seberapa setuju Anda bisa merasakan kesenangan",
                        "Bayangkan diri Anda dalam situasi tersebut",
                        "Jawab sesuai kemampuan Anda saat ini"
                    ],
                    interpretation: "Skor ‚â•3 menunjukkan adanya anhedonia klinis yang signifikan.",
                    url: "test.html?type=shaps",
                    color: "warning"
                },
                {
                    id: "dsst",
                    name: "Digit Symbol Substitution Test",
                    acronym: "DSST",
                    icon: "üî¢",
                    description: "Tes kecepatan pemrosesan kognitif dan perhatian",
                    questions: "93-133 item",
                    duration: "2-5 menit",
                    category: "Kognitif",
                    tags: ["kognitif", "kecepatan", "perhatian", "neuropsikologi"],
                    validity: "Tinggi",
                    about: "DSST adalah tes neuropsikologi yang mengukur kecepatan pemrosesan, perhatian visual, dan koordinasi mata-tangan.",
                    instructions: [
                        "Mencocokkan simbol dengan angka sesuai kunci",
                        "Kerjakan secepat dan seakurat mungkin",
                        "Waktu terbatas (biasanya 90-120 detik)",
                        "Fokus pada akurasi dan kecepatan"
                    ],
                    interpretation: "Skor lebih tinggi menunjukkan kecepatan pemrosesan dan perhatian yang lebih baik.",
                    url: "test.html?type=dsst",
                    color: "success"
                },
                {
                    id: "briefcope",
                    name: "Brief COPE Inventory",
                    acronym: "Brief COPE",
                    icon: "üõ°Ô∏è",
                    description: "Mengukur strategi koping terhadap stres",
                    questions: 28,
                    duration: "10-15 menit",
                    category: "Koping",
                    tags: ["koping", "stres", "strategi", "adaptasi"],
                    validity: "Tinggi",
                    about: "Brief COPE mengukur berbagai strategi koping yang digunakan individu dalam menanggapi situasi stres. Terdiri dari 14 subskala.",
                    instructions: [
                        "28 pernyataan tentang cara menghadapi stres",
                        "Pilih seberapa sering Anda menggunakan setiap cara",
                        "Berdasarkan pengalaman dengan stresor baru-baru ini",
                        "Tidak ada strategi yang benar atau salah"
                    ],
                    interpretation: "Mengidentifikasi pola koping: adaptif vs maladaptif, berfokus pada masalah vs emosi.",
                    url: "test.html?type=briefcope",
                    color: "primary"
                },
                {
                    id: "combined",
                    name: "PHQ-9 & GAD-7 Combined",
                    acronym: "Kombinasi",
                    icon: "üèÜ",
                    description: "Tes kombinasi depresi dan kecemasan paling populer",
                    questions: 16,
                    duration: "10-15 menit",
                    category: "Depresi, Kecemasan",
                    tags: ["depresi", "kecemasan", "populer", "kombinasi", "rekomendasi"],
                    validity: "Sangat Tinggi",
                    about: "Kombinasi PHQ-9 (depresi) dan GAD-7 (kecemasan) memberikan gambaran komprehensif tentang kesehatan mental dengan rekomendasi personal.",
                    instructions: [
                        "16 pertanyaan (9 PHQ-9 + 7 GAD-7)",
                        "Jawab berdasarkan 2 minggu terakhir",
                        "Pilih frekuensi setiap gejala",
                        "Dapatkan hasil dan rekomendasi instan"
                    ],
                    interpretation: "Hasil mencakup skor depresi dan kecemasan dengan rekomendasi personal berdasarkan tingkat keparahan.",
                    url: "test.html?type=combined",
                    color: "danger",
                    featured: true
                }
            ];

            // DOM Elements
            const testsGridEl = document.getElementById('tests-grid');
            const searchInputEl = document.getElementById('search-input');
            const filterTagsEl = document.querySelectorAll('.filter-tag');
            const testDetailModalEl = document.getElementById('test-detail-modal');
            const closeDetailModalEl = document.getElementById('close-detail-modal');
            const startTestFromModalEl = document.getElementById('start-test-from-modal');
            const totalTestsEl = document.getElementById('total-tests');
            const completedTestsEl = document.getElementById('completed-tests');

            // State
            let currentFilter = 'all';
            let currentSearch = '';
            let selectedTest = null;

            function initializeCatalog() { // Initialize the catalog
                loadUserData();
                setActiveMenu('tes');
                renderTests();
                updateStats();
                setupEventListeners();
            
                console.log('Katalog tes psikologis berhasil dimuat!');
            }
        
            function renderTests() { // Render tests to grid
                let filteredTests = psychologicalTests;  // Filter tests
            
                if (currentSearch) { // Apply search filter
                    const searchLower = currentSearch.toLowerCase();
                    filteredTests = filteredTests.filter(test => 
                        test.name.toLowerCase().includes(searchLower) ||
                        test.acronym.toLowerCase().includes(searchLower) ||
                        test.description.toLowerCase().includes(searchLower) ||
                        test.category.toLowerCase().includes(searchLower) ||
                        test.tags.some(tag => tag.toLowerCase().includes(searchLower))
                    );
                }
            
                if (currentFilter !== 'all') { // Apply category filter
                    filteredTests = filteredTests.filter(test => 
                        test.category.toLowerCase().includes(currentFilter) ||
                        test.tags.includes(currentFilter)
                    );
                }
            
                testsGridEl.innerHTML = ''; // Clear grid
                
                // Render each test
                filteredTests.forEach(test => {
                    const testCard = createTestCard(test);
                    testsGridEl.appendChild(testCard);
                });
            
                totalTestsEl.textContent = filteredTests.length; // Update total tests count
            }

            // Create a test card element
            function createTestCard(test) {
                const card = document.createElement('div');
                card.className = 'test-card';
                card.dataset.testId = test.id;
                
                const colorClass = test.color || 'primary'; // Determine color class
                const durationText = typeof test.duration === 'number' ? `${test.duration} menit` : test.duration; // Format duration
            
                card.innerHTML = `
                    <div class="test-card-header">
                        <div class="test-card-title">
                            <div class="test-icon" style="background: linear-gradient(135deg, var(--${colorClass}) 0%, var(--${colorClass}-dark) 100%);">
                                ${test.icon}
                            </div>
                            <div>
                                <div class="test-name">${test.name}</div>
                                <div class="test-acronym">${test.acronym}</div>
                            </div>
                        </div>
                        <p class="test-description">${test.description}</p>
                    </div>
                
                    <div class="test-card-body">
                        <div class="test-details">
                            <div class="test-detail">
                                <i class="fas fa-question-circle"></i>
                                <span>${typeof test.questions === 'number' ? test.questions + ' pertanyaan' : test.questions}</span>
                            </div>
                            <div class="test-detail">
                                <i class="fas fa-clock"></i>
                                <span>${durationText}</span>
                            </div>
                            <div class="test-detail">
                                <i class="fas fa-stethoscope"></i>
                                <span>${test.category}</span>
                            </div>
                            <div class="test-detail">
                                <i class="fas fa-check-circle"></i>
                                <span>Validitas: ${test.validity}</span>
                            </div>
                        </div>
                        
                        <div class="test-tags">
                            ${test.tags.map(tag => `<span class="test-tag">${tag}</span>`).join('')}
                        </div>
                    </div>
                    
                    <div class="test-card-footer">
                        <div class="test-actions">
                            <button class="test-button details" onclick="showTestDetails('${test.id}')">
                                <i class="fas fa-info-circle"></i> Detail
                            </button>
                            <button class="test-button start" onclick="startTest('${test.id}')">
                                <i class="fas fa-play"></i> Mulai Tes
                            </button>
                        </div>
                    </div>
                `;
            
                return card;
            }

            // Show test details in modal
            function showTestDetails(testId) {
                const test = psychologicalTests.find(t => t.id === testId);
                if (!test) return;
            
                selectedTest = test;
                
                // Update modal content
                document.getElementById('modal-test-icon').textContent = test.icon;
                document.getElementById('modal-test-name').textContent = test.name;
                document.getElementById('modal-test-acronym').textContent = `(${test.acronym})`;
                document.getElementById('modal-test-description').textContent = test.description;
                document.getElementById('modal-question-count').textContent = 
                    typeof test.questions === 'number' ? test.questions + ' pertanyaan' : test.questions;
                document.getElementById('modal-duration').textContent = 
                    typeof test.duration === 'number' ? test.duration + ' menit' : test.duration;
                document.getElementById('modal-category').textContent = test.category;
                document.getElementById('modal-validity').textContent = test.validity;
                document.getElementById('modal-about').textContent = test.about;
            
                // Update instructions
                const instructionsList = document.getElementById('modal-instructions');
                instructionsList.innerHTML = test.instructions
                    .map(instruction => `<li><i class="fas fa-check"></i> ${instruction}</li>`)
                    .join('');
            
                document.getElementById('modal-interpretation').textContent = test.interpretation; // Update interpretation
            
                // Update tags
                const tagsContainer = document.getElementById('modal-tags');
                tagsContainer.innerHTML = test.tags
                    .map(tag => `<span class="test-tag">${tag}</span>`)
                    .join('');
                
                testDetailModalEl.classList.add('active'); // Show modal
            }

            // Start a test
            function startTest(testId) {
                const test = psychologicalTests.find(t => t.id === testId);
                if (!test) return;
            
                trackActivity(`Mulai Tes: ${test.name}`, test.icon, 'tes'); // Track activity
                alert(`Memuat tes ${test.name}...`); // Show loading message
                
                // Redirect to test page
                setTimeout(() => {
                    window.location.href = test.url;
                }, 500);
            }

            // Start combined test (featured)
            function startCombinedTest() {
                startTest('combined');
            }

            // Search tests
            function searchTests() {
                currentSearch = searchInputEl.value.trim();
                renderTests();
            }

            // Filter tests by tag
            function filterTests(filter) {
                currentFilter = filter;
            
                // Update active tag
                filterTagsEl.forEach(tag => {
                    if (tag.dataset.filter === filter) {
                        tag.classList.add('active');
                    } else {
                        tag.classList.remove('active');
                    }
                });
                
                renderTests();
            }

            function updateStats() { // Update statistics
                const totalDuration = psychologicalTests.reduce((sum, test) => { // Calculate average time
                    const duration = typeof test.duration === 'string' 
                        ? parseInt(test.duration) || 10 
                        : test.duration;
                    return sum + (duration || 10);
                }, 0);
                
                const avgTime = Math.round(totalDuration / psychologicalTests.length);
                document.getElementById('avg-time').textContent = `${avgTime}m`;
                
                try { // Get completed tests from localStorage
                    let userData = sessionStorage.getItem('currentUser') || localStorage.getItem('currentUser');
                    if (userData) {
                        const user = JSON.parse(userData);
                        const userId = user.email || user.id || 'anonymous';
                        const storageKey = `user_test_results_${userId}`;
                        const results = JSON.parse(localStorage.getItem(storageKey)) || [];
                        completedTestsEl.textContent = results.length;
                    }
                } catch (error) {
                    console.error('Error loading completed tests:', error);
                }
            }

            function setupEventListeners() { // Setup event listeners
                searchInputEl.addEventListener('keypress', (e) => { // Search input
                    if (e.key === 'Enter') {
                        searchTests();
                    }
                });
            
                filterTagsEl.forEach(tag => { // Filter tags
                    tag.addEventListener('click', () => {
                        filterTests(tag.dataset.filter);
                    });
                });
                
                closeDetailModalEl.addEventListener('click', () => { // Modal close
                    testDetailModalEl.classList.remove('active');
                });
            
                startTestFromModalEl.addEventListener('click', () => { // Start test from modal
                    if (selectedTest) {
                        testDetailModalEl.classList.remove('active');
                        startTest(selectedTest.id);
                    }
                });
                
                testDetailModalEl.addEventListener('click', (e) => { // Close modal on overlay click
                    if (e.target === testDetailModalEl) {
                        testDetailModalEl.classList.remove('active');
                    }
                });
            }

            // Fungsi untuk menu active
            function setActiveMenu(menuName) {
                const menuItems = document.querySelectorAll('.menu-item');
                
                menuItems.forEach(item => {
                    item.classList.remove('active');
                    const checkbox = item.querySelector('.menu-checkbox');
                    if (checkbox) {
                        checkbox.classList.remove('checked');
                        checkbox.classList.add('unchecked');
                    }
                });
                
                let selector = '';
                if (menuName === 'dashboard') selector = 'a[href="dashboard.html"]';
                else if (menuName === 'dataset') selector = 'a[href="dataset.html"]';
                else if (menuName === 'analisa') selector = 'a[href="analisa.html"]';
                else if (menuName === 'tes') selector = 'a[href="input.html"]';
                else if (menuName === 'hasil') selector = 'a[href="hasil.html"]';
                else if (menuName === 'riwayat') selector = 'a[href="riwayat.html"]';
                else if (menuName === 'tentang') selector = 'a[href="tentang.html"]';
            
                if (selector) {
                    const activeMenuItem = document.querySelector(selector);
                    if (activeMenuItem) {
                        activeMenuItem.classList.add('active');
                        const checkbox = activeMenuItem.querySelector('.menu-checkbox');
                        if (checkbox) {
                            checkbox.classList.remove('unchecked');
                            checkbox.classList.add('checked');
                        }
                    }
                }
            }

            // Fungsi untuk track activity
            function trackActivity(pageName, icon, pageType) {
                const activity = {
                    id: Date.now(),
                    pageName: pageName,
                    icon: icon,
                    pageType: pageType,
                    timestamp: new Date().toISOString()
                };
            
                try {
                    let userData = sessionStorage.getItem('currentUser') || localStorage.getItem('currentUser');
                    if (userData) {
                        const user = JSON.parse(userData);
                        const userId = user.email || user.id || 'anonymous';
                        const storageKey = `user_activities_${userId}`;
                        let activities = JSON.parse(localStorage.getItem(storageKey)) || [];
                        activities.unshift(activity);
                        if (activities.length > 20) activities = activities.slice(0, 20);
                        localStorage.setItem(storageKey, JSON.stringify(activities));
                    }
                } catch (error) {
                    console.error('Error saving activity:', error);
                }
                
                setActiveMenu(pageType);
                return true;
            }

            // Fungsi untuk logout confirmation
            function confirmLogout() {
                if (confirm('Apakah Anda yakin ingin keluar?')) {
                    sessionStorage.removeItem('currentUser');
                    localStorage.removeItem('currentUser');
                    return true;
                }
                return false;
            }

            // Fungsi untuk load user data
            function loadUserData() {
                try {
                    let userData = sessionStorage.getItem('currentUser') || localStorage.getItem('currentUser');
                    
                    if (userData) {
                        const user = JSON.parse(userData);
                        const fullName = user.fullName || user.name || 'Pengguna';
                        const email = user.email || 'user@example.com';
                        const gender = user.gender || 'Tidak ditentukan';
                    
                        let genderDisplay = gender;
                        if (gender.toLowerCase() === 'female') genderDisplay = 'Perempuan';
                        else if (gender.toLowerCase() === 'male') genderDisplay = 'Laki-laki';
                        
                        document.getElementById('user-full-name').textContent = fullName;
                        document.getElementById('user-email').textContent = email;
                        document.getElementById('user-gender').textContent = genderDisplay;
                        
                        return { fullName, email, gender: genderDisplay };
                    }
                } catch (error) {
                    console.error('Error loading user data:', error);
                }
                return null;
            }

            // Check if user is logged in
            function checkUserLogin() {
                try {
                    const sessionUser = sessionStorage.getItem('currentUser');
                    const localUser = localStorage.getItem('currentUser');
                    
                    if (!sessionUser && !localUser) {
                        window.location.href = 'index.html';
                        return false;
                    }
                    return true;
                } catch (error) {
                    window.location.href = 'index.html';
                    return false;
                }
            }

            // Initialize when page loads
            document.addEventListener('DOMContentLoaded', function() {
                if (!checkUserLogin()) return;
                
                initializeCatalog();
            });
        </script>
    </body>
</html>